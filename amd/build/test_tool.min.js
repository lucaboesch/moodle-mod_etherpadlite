define("mod_etherpadlite/test_tool",["exports","core/notification","core/templates","core/ajax","core/str"],(function(_exports,_notification,_templates,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Test tool for checking the connection and credentials of a given Etherpad Lite API-URL and API-key.
   *
   * @module     mod_etherpadlite/test_tool
   * @copyright  2025 Andr√© Menrath <andre.menrath@uni-graz.at>, University of Graz
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.getTestResults=void 0,_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);const SELECTORS_TEST_TOOL_BUTTON="#mod-etherpadlite-test-tool-button";_exports.init=wwwroot=>{let actualpath=window.location.origin+window.location.pathname;actualpath!==wwwroot+"/admin/settings.php"&&actualpath!==wwwroot+"/admin/search.php"||registerListenerEvents()};const registerListenerEvents=()=>{const testButton=document.querySelector(SELECTORS_TEST_TOOL_BUTTON);testButton&&(testButton.addEventListener("click",(event=>{event.preventDefault(),testConnection().catch(_notification.default.exception)})),testButton.hasAttribute("disabled")&&testButton.removeAttribute("disabled"),testButton.classList.contains("disabled")&&testButton.classList.remove("disabled"))},getTestResults=()=>(0,_ajax.call)([{methodname:"mod_etherpadlite_test_tool",args:{}}])[0];_exports.getTestResults=getTestResults;const testConnection=async()=>{let body,title=await(0,_str.getString)("testmodaltitle","mod_etherpadlite");const testResult=await getTestResults();body=await _templates.default.render("mod_etherpadlite/test_tool_result",testResult),_notification.default.alert(title,body)}}));

//# sourceMappingURL=test_tool.min.js.map